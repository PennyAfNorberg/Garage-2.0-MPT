@model Garage_2._0_MPT.Models.MemberViewModel

@{
    ViewData["Title"] = "Details";
}

<h1>Details</h1>

<div>
    <h4>Members</h4>
    <hr />
    <dl class="row">
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.Member.FirstName)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Member.FirstName)
        </dd>
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.Member.LastName)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Member.LastName)
        </dd>
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.Member.Email)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Member.Email)
        </dd>
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.Member.Street)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Member.Street)
        </dd>
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.Member.ZipCode)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Member.ZipCode)
        </dd>
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.Member.City)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Member.City)
        </dd>
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.Vehicles)
        </dt>
        <dd class="col-sm-10">
            @if (Model.Vehicles != null)
            {
            <table>
                <!--<tr><th>Type</th><th>Reg.nr</th><th>Color</th><th>Model</th><th>Brand</th><th>Parked Time</th><th>Price</th><th>Parking lot</th><th>Controll</th></tr> -->
                @foreach (var Vehicle in Model.Vehicles.OrderByDescending(v => (v.SubParkedViewModels == null) ? 0 : 1))
                {

                    <tr>
                        <td>
                            @Html.DisplayFor(modelItem => Vehicle.Vehicletype.Name)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => Vehicle.Vehicle.RegNr)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => Vehicle.Vehicle.VehicleColor)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => Vehicle.Vehicle.VehicleModel)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => Vehicle.Vehicle.VehicleBrand)
                        </td>

                        @if (Vehicle.SubParkedViewModels != null)
                        {

                            @foreach (var item2 in Vehicle.SubParkedViewModels)
                            {


                                <td>
                                    @Html.DisplayFor(modelItem => item2.ParkedTime)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item2.Price)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item2.ParkedVehicle.Where)
                                </td>
                                <td>
                                    <div class="allBtnTB">
                                        <a class="myBtnTb" asp-controller="ParkedVehicles" asp-action="Check_Out" asp-route-id="@item2.ParkedVehicle.Id">Check Out</a>
                                        <a class="myBtnTb" asp-controller="ParkedVehicles" asp-route-id="@item2.ParkedVehicle.Id">Details</a>
                                        <!-- <a asp-action="Delete" asp-route-id="@item2.ParkedVehicle.Id">Delete</a> |
                            <a class="myBtnTb" asp-action="Receipt" asp-route-id="@item2.ParkedVehicle.Id">Receipt</a> -->
                                    </div>
                                </td>

                            }

                        }
                        @if (Vehicle.SubParkedViewModels == null)
                        {
                            <td></td>
                            <td></td>
                            <td></td>
                            <td>
                                <div class="allBtnTB">
                                    <a class="myBtnTb" asp-controller="ParkedVehicles" asp-action="Parkthis" asp-route-vehicleid="@Vehicle.Vehicle.Id">Park this</a>
                                    <a class="myBtnTb" asp-controller="ParkedVehicles" asp-action="vehicleDetails" asp-route-vehicleid="@Vehicle.Vehicle.Id">Details</a>
                                </div>
                            </td>
                        }
                    </tr>

                }
            </table>
            }
        </dd>
    </dl>

</div>
<div>
    <a asp-action="Edit" asp-route-id="@Model.Member.Id">Edit</a> |
    <a asp-action="Index">Back to List</a>
</div>
